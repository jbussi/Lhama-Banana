{% extends "base.html" %}

{% block page_css %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<link rel="stylesheet" href="{{ url_for('main.static', filename='css/contato.css') }}">
{% endblock %}

{% block title %}Contato - LhamaBanana{% endblock %}

{% block content %}

<div class="container">
    <h1 class="page-title">Entre em Contato</h1>
    
    <div class="contact-container">
        <section class="contact-section">
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert alert-{{ category }}">
                        {{ message }}
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}
        
        <div class="contact-grid">
            <div class="contact-info">
                <h2>Informações de Contato</h2>
                {% if contato and contato.texto_principal %}
                {# texto_principal pode vir:
                   - como texto com \n
                   - como HTML (<br>, <p>...)
                   - como HTML escapado (&lt;br&gt;)
                   Aqui normalizamos tudo para renderizar corretamente no frontend.
                #}
                <div class="contact-texto-principal">{{ (contato.texto_principal or '')
                  |replace('&lt;br&gt;', '<br>')
                  |replace('&lt;br/&gt;', '<br>')
                  |replace('&lt;br /&gt;', '<br>')
                  |replace('&lt;p&gt;', '<p>')
                  |replace('&lt;/p&gt;', '</p>')
                  |replace('\n', '<br>')
                  |safe }}</div>
                {% else %}
                <p>Estamos à disposição para esclarecer suas dúvidas, ouvir sugestões ou receber seu feedback. Entre em contato conosco pelo formulário ou utilize um dos canais abaixo:</p>
                {% endif %}
                
                {% if contato and contato.informacoes %}
                    {% for info in contato.informacoes %}
                    <div class="info-item">
                        <div class="info-icon">
                            <i class="{{ info.icone }}"></i>
                        </div>
                        <div class="info-content">
                            <h3>{{ info.titulo }}</h3>
                            {% if info.link %}
                            <a href="{{ info.link }}">{{ info.valor }}</a>
                            {% else %}
                            <p>{{ info.valor|replace('\n', '<br>')|safe }}</p>
                            {% endif %}
                        </div>
                    </div>
                    {% endfor %}
                {% endif %}
                
                {% if contato and contato.links %}
                <div class="info-item">
                    <div class="info-icon">
                        <i class="fas fa-share-alt"></i>
                    </div>
                    <div class="info-content">
                        <h3>Redes Sociais</h3>
                        <div class="social-links">
                            {% if contato.links.instagram %}
                            <a href="{{ contato.links.instagram }}" target="_blank" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                            {% endif %}
                            {% if contato.links.facebook %}
                            <a href="{{ contato.links.facebook }}" target="_blank" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                            {% endif %}
                            {% if contato.links.pinterest %}
                            <a href="{{ contato.links.pinterest }}" target="_blank" aria-label="Pinterest"><i class="fab fa-pinterest-p"></i></a>
                            {% endif %}
                            {% if contato.links.youtube %}
                            <a href="{{ contato.links.youtube }}" target="_blank" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
                            {% endif %}
                        </div>
                    </div>
                </div>
                {% endif %}
            </div>
            
            <div class="contact-form-container">
                <h2>Envie uma Mensagem</h2>
                <p>Preencha o formulário abaixo e entraremos em contato o mais breve possível.</p>
                
                <form class="contact-form" method="POST" action="{{ url_for('main.contato_page') }}">
                    <div class="form-group">
                        <label for="nome" class="required-field">Nome Completo</label>
                        <input type="text" id="nome" name="nome" required class="form-control" placeholder="Seu nome completo">
                    </div>
                    
                    <div class="form-group">
                        <label for="email" class="required-field">E-mail</label>
                        <input type="email" id="email" name="email" required class="form-control" placeholder="seu@email.com">
                    </div>
                    
                    <div class="form-group">
                        <label for="telefone">Telefone</label>
                        <input type="text" id="telefone" name="telefone" class="form-control" placeholder="(00) 00000-0000">
                    </div>
                    
                    <div class="form-group">
                        <label for="assunto" class="required-field">Assunto</label>
                        <select id="assunto" name="assunto" required class="form-control">
                            <option value="" disabled selected>Selecione o assunto</option>
                            <option value="Dúvida">Dúvida</option>
                            <option value="Sugestão">Sugestão</option>
                            <option value="Reclamação">Reclamação</option>
                            <option value="Elogio">Elogio</option>
                            <option value="Outro">Outro</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="mensagem" class="required-field">Mensagem</label>
                        <textarea id="mensagem" name="mensagem" required class="form-control" placeholder="Escreva sua mensagem aqui..."></textarea>
                    </div>
                    
                    <button type="submit" class="btn-submit">
                        <i class="fas fa-paper-plane"></i> Enviar Mensagem
                    </button>
                </form>
            </div>
        </div>
        
        </div>
    </section>
</div>

{% endblock %}
