{% extends "base.html" %}

{# O título será preenchido dinamicamente pelo JavaScript após o carregamento dos dados #}
{% block title %}Detalhes do Produto - LhamaBanana{% endblock %}

{% block content %}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    {# É importante que estes CSS sejam carregados no HEAD #}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base/reset.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base/typhography.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base/animations.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base/colors.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/pages/produto.css') }}">
{# Contêiner principal para o conteúdo do produto, útil para exibir mensagens de erro #}
<div class="product-container" id="main-product-container">
    <div class="breadcrumb">
        <a href="{{ url_for('home') }}">Início</a> / 
        <a href="{{ url_for('loja_page') }}">Loja</a> / 
        {# Categoria e nome do produto serão preenchidos pelo JS #}
        <span id="product-category-breadcrumb">Carregando Categoria...</span> / 
        <span id="product-name-breadcrumb">Carregando Produto...</span>
    </div>
    
    <div class="product-detail">
        <div class="product-gallery">
            <div class="product-main-image-container">
                {# A imagem principal será injetada aqui pelo JavaScript #}
                <img src="/static/img/placeholder.jpg" alt="Carregando Imagem" class="product-main-image" id="mainImage">
            </div>
            
            <div class="product-thumbnails" id="product-thumbnails">
                {# As miniaturas serão criadas dinamicamente pelo JS #}
                <p>Carregando miniaturas...</p>
            </div>
        </div>
        
        <div class="product-info">
            {# Categoria do produto #}
            <span class="product-category" id="product-category">Carregando Categoria...</span>
            {# Nome do produto #}
            <h1 class="product-title" id="product-name">Carregando Nome do Produto...</h1>
            
            <div class="product-price">
                <span class="current-price" id="product-price">R$ --,--</span>
                {# Preços antigos, descontos serão gerenciados pelo JS se existirem na API #}
                <span class="old-price" id="old-price" style="display:none;">R$ --,--</span>
                <span class="discount-badge" id="discount-badge" style="display:none;">--% OFF</span>
            </div>
            
            <div class="product-description">
                <p id="product-description">Carregando descrição...</p>
            </div>
            
            <div class="product-variations">
                <div class="variation-title">Estampa:</div>
                <div class="color-options" id="estampa-options-container">
                    {# As opções de estampa serão criadas dinamicamente pelo JS aqui dentro #}
                </div>
            </div>
            
            <div class="product-variations">
                <div class="variation-title">Tamanho:</div>
                <div class="size-options" id="tamanho-options-container">
                    {# As opções de tamanho serão criadas dinamicamente pelo JS aqui dentro #}
                </div>
            </div>
            
            <div class="product-meta">
                <div class="meta-item">
                    <span class="meta-label">Disponibilidade:</span>
                    <span class="meta-value" id="stock-status">Carregando status...</span>
                </div>
                <div class="meta-item">
                    <span class="meta-label">Código do produto:</span>
                    <span class="meta-value" id="product-sku">SKU: -</span>
                </div>
                <div class="meta-item">
                    <span class="meta-label">Categoria:</span>
                    <span class="meta-value" id="product-category-info">Carregando Categoria...</span>
                </div>
                <div class="meta-item">
                    <span class="meta-label">Tags:</span>
                    <span class="meta-value" id="product-tags">
                        Carregando tags...
                    </span>
                </div>
            </div>
            
            <div class="product-actions">
                <div class="quantity-selector">
                    <button class="quantity-btn minus" id="quantity-minus-btn">-</button>
                    <input type="number" class="quantity-input" value="1" min="1" id="quantity-input">
                    <button class="quantity-btn plus" id="quantity-plus-btn">+</button>
                </div>
                
                <button class="add-to-cart-btn" id="add-to-cart-btn" disabled>
                    <i class="fas fa-shopping-cart"></i> Adicionar ao Carrinho
                </button>
                
                <button class="buy-now-btn" id="buy-now-btn" disabled>
                    <i class="fas fa-bolt"></i> Comprar Agora
                </button>
            </div>
        </div>
    </div>
    
    <div class="product-tabs">
        <div class="tabs-header">
            <button class="tab-btn active" data-tab="description" id="tab-description-btn">Descrição</button>
            <button class="tab-btn" data-tab="details" id="tab-details-btn">Detalhes</button>
            <button class="tab-btn" data-tab="reviews" id="tab-reviews-btn">Avaliações (<span id="reviews-count">0</span>)</button>
        </div>
        
        <div class="tab-content" id="descriptionTab">
            <p id="description-tab-content">Carregando descrição...</p>
        </div>
        
        <div class="tab-content" id="detailsTab" style="display: none;">
            <h3>Informações Adicionais</h3>
            <table class="table">
                <tbody id="details-table-body">
                    <tr><th>Material</th><td id="detail-material">Carregando...</td></tr>
                    <tr><th>Cor</th><td id="detail-cor">Carregando...</td></tr>
                    <tr><th>Tamanho</th><td id="detail-tamanho">Carregando...</td></tr>
                    <tr><th>Peso</th><td id="detail-peso">Carregando...</td></tr>
                    <tr><th>Composição</th><td id="detail-composicao">Carregando...</td></tr>
                    <tr><th>Instruções de Lavagem</th><td id="detail-instrucoes">Carregando...</td></tr>
                </tbody>
            </table>
        </div>
        
        <div class="tab-content" id="reviewsTab" style="display: none;">
            <div id="reviews-list">
                <p>Nenhuma avaliação ainda. Seja o primeiro a avaliar!</p>
            </div>
            
            <button class="btn btn-outline-primary mt-3" id="write-review-btn">Escrever uma avaliação</button>
        </div>
    </div>
</div>

{# Link para o JavaScript que irá carregar o conteúdo dinamicamente #}
<script type="module" src="{{ url_for('static', filename='js/produto.js') }}"></script>
{% endblock %}